/* 1) Fonts */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Montserrat:wght@600;700&display=swap');

/* 2) Tokens BEFORE Tailwind */
@theme {
  /* Fonts */
  --font-sans: Inter, ui-sans-serif, system-ui, sans-serif;
  --font-display: Montserrat, var(--font-sans);

  /* Surfaces */
  --color-bg: #f8fafb;
  --color-surface-1: #f3f6f8;
  --color-surface-health: #e8faf6;
  --color-surface-data: #eef0ff;
  --color-surface-people: #f8effe;

  /* Text */
  --color-ink: #0f172a;
  --color-muted: #475569;

  /* Accents */
  --color-primary: #4f46e5; /* indigo */
  --color-data: #3b82f6; /* blue */
  --color-health: #14b8a6; /* mint/teal */
  --color-people: #c026d3; /* orchid */
  --color-info: #0ea5e9;
  --color-success: #10b981;
  --color-warning: #f59e0b;

  --color-border: #e2e8f0;

  /* Type scale (fluid) */
  --text-hero: clamp(2.25rem, 6vw, 3.5rem); /* ~36–56px */
  --text-h1: clamp(2rem, 3.5vw, 3rem); /* ~32–48px */
  --text-h2: clamp(1.5rem, 2.5vw, 2.25rem); /* ~24–36px */
  --text-h3: clamp(1.25rem, 2vw, 1.5rem); /* ~20–24px */
  --text-body: clamp(1rem, 1.2vw, 1.125rem); /* ~16–18px */
  --text-small: 0.9375rem;

  /* Rhythm */
  --leading-tight: 1.15;
  --leading-head: 1.2;
  --leading-body: 1.7;
  --measure: 65ch;

  /* Layout helpers */
  --nav-h: 4rem; /* used by scroll-mt-nav */
}

/* 2.5) Follow system *only if* no manual class is set */
@media (prefers-color-scheme: dark) {
  :root:not(.dark):not(.light) {
    --color-bg: #0b0c10;
    --color-surface-1: #0f1418;
    --color-surface-health: #0f1b19;
    --color-surface-data: #141327;
    --color-surface-people: #1c1221;

    --color-ink: #e5f0ff;
    --color-muted: #9aa7b7;

    --color-primary: #818cf8;
    --color-data: #60a5fa;
    --color-health: #5eead4;
    --color-people: #e879f9;
    --color-info: #7dd3fc;
    --color-success: #6ee7b7;
    --color-warning: #fbbf24;

    --color-border: #243141;
  }
}

/* 3) Manual override wins */
:root.dark {
  --color-bg: #0b0c10;
  --color-surface-1: #0f1418;
  --color-surface-health: #0f1b19;
  --color-surface-data: #141327;
  --color-surface-people: #1c1221;

  --color-ink: #e5f0ff;
  --color-muted: #9aa7b7;

  --color-primary: #818cf8;
  --color-health: #5eead4;
  --color-people: #e879f9;
  --color-info: #7dd3fc;
  --color-success: #6ee7b7;
  --color-warning: #fbbf24;

  --color-border: #243141;
}

/* 4) Load Tailwind after tokens */
@import 'tailwindcss';

/* 5) Base */
@layer base {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  html {
    color-scheme: light dark;
    font-family: var(--font-sans);
    line-height: 1.5;
    scroll-behavior: smooth;
    background: var(--color-bg);
    color: var(--color-ink);
  }

  body {
    margin: 0;
    min-height: 100vh;
  }

  h1,
  h2,
  h3,
  h4 {
    font-family: var(--font-display);
  }

  /* Global outline (we'll use rings on interactive elements) */
  :focus-visible {
    outline: 2px dashed var(--color-primary);
    outline-offset: 2px;
  }
}

/* 6) Components */
@layer components {
  .navbar-glass {
    @apply border border-white/20 bg-white/60 backdrop-blur-md dark:border-white/10 dark:bg-white/10;
  }
}

/* 7) Utilities: fonts, colors, type, rhythm, helpers */
@layer utilities {
  /* Font families */
  .font-display {
    font-family: var(--font-display);
  }

  /* Text colors mapped to tokens */
  .text-ink {
    color: var(--color-ink);
  }
  .text-muted {
    color: var(--color-muted);
  }
  .text-primary {
    color: var(--color-primary);
  }
  .text-data {
    color: var(--color-data);
  }
  .text-health {
    color: var(--color-health);
  }
  .text-products {
    color: var(--color-health);
  }
  .text-people {
    color: var(--color-people);
  }
  .text-info {
    color: var(--color-info);
  }
  .text-success {
    color: var(--color-success);
  }
  .text-warning {
    color: var(--color-warning);
  }

  /* Background colors mapped to surfaces */
  .bg-bg {
    background-color: var(--color-bg);
  }
  .bg-surface-1 {
    background-color: var(--color-surface-1);
  }
  .bg-surface-health {
    background-color: var(--color-surface-health);
  }
  .bg-surface-data {
    background-color: var(--color-surface-data);
  }
  .bg-surface-people {
    background-color: var(--color-surface-people);
  }

  /* Borders */
  .border-default {
    border-color: var(--color-border);
  }

  /* Type scale */
  .text-hero {
    font-size: var(--text-hero);
    line-height: var(--leading-tight);
    letter-spacing: -0.01em;
  }
  .text-h1 {
    font-size: var(--text-h1);
    line-height: var(--leading-head);
    letter-spacing: -0.005em;
  }
  .text-h2 {
    font-size: var(--text-h2);
    line-height: var(--leading-head);
  }
  .text-h3 {
    font-size: var(--text-h3);
    line-height: 1.3;
  }
  .text-body {
    font-size: var(--text-body);
    line-height: var(--leading-body);
  }
  .text-small {
    font-size: var(--text-small);
    line-height: 1.5;
  }

  /* Measure & vertical rhythm */
  .measure {
    max-width: var(--measure);
  }
  .stack-s > * + * {
    margin-top: 0.5rem;
  }
  .stack-m > * + * {
    margin-top: 0.75rem;
  }
  .stack-l > * + * {
    margin-top: 1rem;
  }

  /* Reusable focus ring for interactive elements */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--color-primary)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--color-bg)];
  }

  /* Headline balance + anchor offset */
  .text-balance {
    text-wrap: balance;
  }
  .scroll-mt-nav {
    scroll-margin-top: calc(var(--nav-h, 4rem));
  }

  /* Optional: drive stroke width by CSS var if you like */
  .stroke-var * {
    stroke-width: var(--line-w, 2px);
  }

  /* In-view reveal animations */
  .reveal {
    opacity: 0;
    transform: translateY(8px);
    transition:
      opacity 200ms ease-out,
      transform 200ms ease-out;
  }
  .reveal.inview {
    opacity: 1;
    transform: none;
  }

  .reveal-x {
    opacity: 0;
    transform: translateX(var(--reveal-x, 8px));
    transition:
      opacity 220ms ease-out,
      transform 220ms ease-out;
  }
  .reveal-x.inview {
    opacity: 1;
    transform: none;
  }
}

/* Reduced motion: disable/soften entrances */
@media (prefers-reduced-motion: reduce) {
  .reveal,
  .reveal-x {
    transition: none !important;
    opacity: 1 !important;
    transform: none !important;
  }
}
